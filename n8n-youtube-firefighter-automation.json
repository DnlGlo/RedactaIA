{
    "name": "YouTube Firefighter Shorts Automation",
    "nodes": [
        {
            "parameters": {},
            "id": "schedule-trigger",
            "name": "Schedule Trigger",
            "type": "n8n-nodes-base.scheduleTrigger",
            "typeVersion": 1.1,
            "position": [
                250,
                300
            ],
            "webhookId": "",
            "notes": "Trigger workflow daily or on demand"
        },
        {
            "parameters": {
                "model": "gpt-4",
                "messages": {
                    "messages": [
                        {
                            "role": "system",
                            "content": "You are a creative scriptwriter for viral YouTube Shorts about firefighters. Create dramatic, engaging rescue scenarios."
                        },
                        {
                            "role": "user",
                            "content": "Create a dramatic firefighter rescue script for a 15-second YouTube Short. The script MUST have exactly 3 scenes. Each scene should be 5 seconds. Format:\n\nSCENE 1: [Describe the opening scene with firefighter POV]\nSCENE 2: [Describe the action/rescue scene]\nSCENE 3: [Describe the resolution/hero moment]\n\nTheme: Firefighters saving people, animals, or handling extreme situations. Make it dramatic and viral-worthy. Must be in English for English-speaking audience."
                        }
                    ]
                },
                "options": {
                    "temperature": 0.9,
                    "maxTokens": 500
                }
            },
            "id": "chatgpt-script-generation",
            "name": "ChatGPT - Script Generation",
            "type": "n8n-nodes-base.openAi",
            "typeVersion": 1.3,
            "position": [
                450,
                300
            ],
            "credentials": {
                "openAiApi": {
                    "id": "your-openai-credential-id",
                    "name": "OpenAI API"
                }
            },
            "notes": "Generates 3-scene script for the short"
        },
        {
            "parameters": {
                "jsCode": "// Extract the script from ChatGPT response\nconst script = $input.item.json.choices[0].message.content;\n\n// Split into 3 scenes\nconst scenes = [];\nconst sceneRegex = /SCENE (\\d+):\\s*(.+?)(?=SCENE \\d+:|$)/gs;\nlet match;\n\nwhile ((match = sceneRegex.exec(script)) !== null) {\n  scenes.push({\n    sceneNumber: parseInt(match[1]),\n    description: match[2].trim()\n  });\n}\n\n// Ensure we have exactly 3 scenes\nif (scenes.length !== 3) {\n  throw new Error(`Expected 3 scenes but got ${scenes.length}`);\n}\n\n// Return array with 3 items for the next node\nreturn scenes.map(scene => ({\n  json: {\n    fullScript: script,\n    sceneNumber: scene.sceneNumber,\n    sceneDescription: scene.description\n  }\n}));"
            },
            "mode": "runOnceForAllItems"
        },
        "id": "code-split-scenes",
        "name": "Code - Split Scenes",
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
            650,
            300
        ],
        "notes": "Splits the script into 3 individual scenes"
    },
    {
        "parameters": {
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "requestMethod": "POST",
            "url": "https://api.x.ai/v1/video/generate",
            "sendHeaders": true,
            "headerParameters": {
                "parameters": [
                    {
                        "name": "Content-Type",
                        "value": "application/json"
                    }
                ]
            },
            "sendBody": true,
            "bodyParameters": {
                "parameters": [
                    {
                        "name": "prompt",
                        "value": "={{ $json.sceneDescription }}"
                    },
                    {
                        "name": "duration",
                        "value": "5"
                    },
                    {
                        "name": "aspect_ratio",
                        "value": "9:16"
                    },
                    {
                        "name": "fps",
                        "value": "30"
                    },
                    {
                        "name": "style",
                        "value": "cinematic POV firefighter rescue, dramatic, intense, realistic, high quality"
                    }
                ]
            },
            "options": {}
        },
        "id": "grok-video-generation",
        "name": "Grok - Video Generation",
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
            850,
            300
        ],
        "credentials": {
            "httpHeaderAuth": {
                "id": "your-grok-credential-id",
                "name": "Grok API Key"
            }
        },
        "notes": "Generate video for each scene using Grok AI. Note: Replace with actual Grok video API endpoint when available"
    },
    {
        "parameters": {
            "values": {
                "string": [
                    {
                        "name": "videoUrl",
                        "value": "={{ $json.video_url || $json.url || $json.result?.video_url }}"
                    },
                    {
                        "name": "sceneNumber",
                        "value": "={{ $json.sceneNumber }}"
                    },
                    {
                        "name": "fullScript",
                        "value": "={{ $json.fullScript }}"
                    }
                ]
            },
            "options": {}
        },
        "id": "set-video-data",
        "name": "Set Video Data",
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.3,
        "position": [
            1050,
            300
        ],
        "notes": "Normalize video data from Grok response"
    },
    {
        "parameters": {
            "mode": "combine",
            "combinationMode": "mergeByPosition",
            "options": {}
        },
        "id": "wait-for-all-videos",
        "name": "Wait For All Videos",
        "type": "n8n-nodes-base.merge",
        "typeVersion": 2.1,
        "position": [
            1250,
            300
        ],
        "notes": "Wait until all 3 videos are generated"
    },
    {
        "parameters": {
            "jsCode": "// Download all 3 video URLs\nconst videos = $input.all().map(item => ({\n  url: item.json.videoUrl,\n  scene: item.json.sceneNumber\n}));\n\n// Sort by scene number\nvideos.sort((a, b) => a.scene - b.scene);\n\nreturn [{\n  json: {\n    videos: videos,\n    fullScript: $input.first().json.fullScript\n  }\n}];"
        }
    },
    "id": "prepare-video-merge",
    "name": "Prepare Video Merge",
    "type": "n8n-nodes-base.code",
    "typeVersion": 2,
    "position": [
        1450,
        300
    ],
    "notes": "Prepare videos for concatenation"
},
{
    "parameters": {
        "command": "=ffmpeg -i {{ $json.videos[0].url }} -i {{ $json.videos[1].url }} -i {{ $json.videos[2].url }} -filter_complex \"[0:v][0:a][1:v][1:a][2:v][2:a]concat=n=3:v=1:a=1[outv][outa]\" -map \"[outv]\" -map \"[outa]\" -c:v libx264 -c:a aac -movflags +faststart /tmp/final_video_{{ $now.toFormat('yyyyMMddHHmmss') }}.mp4"
    },
    "id": "merge-videos-ffmpeg",
    "name": "Merge Videos (FFmpeg)",
    "type": "n8n-nodes-base.executeCommand",
    "typeVersion": 1,
    "position": [
        1650,
        300
    ],
    "notes": "Concatenate 3 videos into 1 using FFmpeg. Requires FFmpeg installed on n8n server"
},
{
    "parameters": {
        "filePath": "=/tmp/final_video_{{ $now.toFormat('yyyyMMddHHmmss') }}.mp4"
    },
    "id": "read-final-video",
    "name": "Read Final Video",
    "type": "n8n-nodes-base.readBinaryFile",
    "typeVersion": 1,
    "position": [
        1850,
        300
    ],
    "notes": "Load the merged video file"
},
{
    "parameters": {
        "model": "gpt-4",
        "messages": {
            "messages": [
                {
                    "role": "system",
                    "content": "You are an expert at creating viral YouTube titles and descriptions for Shorts."
                },
                {
                    "role": "user",
                    "content": "=Based on this firefighter rescue script:\n\n{{ $('Prepare Video Merge').item.json.fullScript }}\n\nCreate:\n1. A viral YouTube title (max 100 characters, attention-grabbing, includes emojis)\n2. A compelling description (3-4 lines, includes relevant hashtags)\n\nFormat:\nTITLE: [your title]\nDESCRIPTION: [your description]"
                }
            ]
        },
        "options": {
            "temperature": 0.8
        }
    },
    "id": "generate-title-description",
    "name": "Generate Title & Description",
    "type": "n8n-nodes-base.openAi",
    "typeVersion": 1.3,
    "position": [
        1650,
        500
    ],
    "credentials": {
        "openAiApi": {
            "id": "your-openai-credential-id",
            "name": "OpenAI API"
        }
    },
    "notes": "Generate viral title and description"
},
{
    "parameters": {
        "jsCode": "const response = $input.item.json.choices[0].message.content;\n\nconst titleMatch = response.match(/TITLE:\\s*(.+)/i);\nconst descriptionMatch = response.match(/DESCRIPTION:\\s*([\\s\\S]+)/i);\n\nreturn [{\n  json: {\n    title: titleMatch ? titleMatch[1].trim() : 'Heroic Firefighter Rescue ðŸš’ðŸ”¥',\n    description: descriptionMatch ? descriptionMatch[1].trim() : 'Amazing firefighter rescue! #firefighter #rescue #hero'\n  }\n}];"
    }
},
"id": "parse-title-description",
"name": "Parse Title & Description",
"type": "n8n-nodes-base.code",
"typeVersion": 2,
"position": [
    1850,
    500
],
"notes": "Extract title and description"
},
{
"parameters": {
    "mode": "combine",
    "combinationMode": "mergeByPosition"
},
"id": "merge-video-metadata",
"name": "Merge Video & Metadata",
"type": "n8n-nodes-base.merge",
"typeVersion": 2.1,
"position": [
    2050,
    400
],
"notes": "Combine video file with title and description"
},
{
"parameters": {
    "resource": "video",
    "operation": "upload",
    "title": "={{ $json.title }}",
    "description": "={{ $json.description }}",
    "categoryId": "22",
    "privacyStatus": "public",
    "madeForKids": false,
    "binaryData": true,
    "binaryPropertyName": "data",
    "options": {
        "tags": "firefighter,rescue,hero,emergency,shorts,viral,POV,extreme"
    }
},
"id": "youtube-upload",
"name": "YouTube Upload",
"type": "n8n-nodes-base.youTube",
"typeVersion": 1,
"position": [
    2250,
    400
],
"credentials": {
    "youTubeOAuth2Api": {
        "id": "your-youtube-credential-id",
        "name": "YouTube OAuth2"
    }
},
"notes": "Upload final video to YouTube as Short"
},
{
"parameters": {
    "values": {
        "string": [
            {
                "name": "status",
                "value": "success"
            },
            {
                "name": "videoId",
                "value": "={{ $json.id }}"
            },
            {
                "name": "videoUrl",
                "value": "=https://youtube.com/shorts/{{ $json.id }}"
            },
            {
                "name": "title",
                "value": "={{ $json.snippet.title }}"
            }
        ]
    },
    "options": {}
},
"id": "final-output",
"name": "Final Output",
"type": "n8n-nodes-base.set",
"typeVersion": 3.3,
"position": [
    2450,
    400
],
"notes": "Output final result"
}
],
"connections": {
"Schedule Trigger": {
"main": [
    [
        {
            "node": "ChatGPT - Script Generation",
            "type": "main",
            "index": 0
        }
    ]
]
},
"ChatGPT - Script Generation": {
"main": [
    [
        {
            "node": "Code - Split Scenes",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Code - Split Scenes": {
"main": [
    [
        {
            "node": "Grok - Video Generation",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Grok - Video Generation": {
"main": [
    [
        {
            "node": "Set Video Data",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Set Video Data": {
"main": [
    [
        {
            "node": "Wait For All Videos",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Wait For All Videos": {
"main": [
    [
        {
            "node": "Prepare Video Merge",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Prepare Video Merge": {
"main": [
    [
        {
            "node": "Merge Videos (FFmpeg)",
            "type": "main",
            "index": 0
        },
        {
            "node": "Generate Title & Description",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Merge Videos (FFmpeg)": {
"main": [
    [
        {
            "node": "Read Final Video",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Read Final Video": {
"main": [
    [
        {
            "node": "Merge Video & Metadata",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Generate Title & Description": {
"main": [
    [
        {
            "node": "Parse Title & Description",
            "type": "main",
            "index": 0
        }
    ]
]
},
"Parse Title & Description": {
"main": [
    [
        {
            "node": "Merge Video & Metadata",
            "type": "main",
            "index": 1
        }
    ]
]
},
"Merge Video & Metadata": {
"main": [
    [
        {
            "node": "YouTube Upload",
            "type": "main",
            "index": 0
        }
    ]
]
},
"YouTube Upload": {
"main": [
    [
        {
            "node": "Final Output",
            "type": "main",
            "index": 0
        }
    ]
]
}
},
"pinData": {},
"settings": {
"executionOrder": "v1"
},
"staticData": null,
"tags": [],
"triggerCount": 0,
"updatedAt": "2026-01-16T00:00:00.000Z",
"versionId": ""
}